<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>充电桩配置</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- 顶部标题区 -->
        <header>
            <h1>TOSPO EVSE MODE3</h1>
            <p>WIFI AP模式 · 本地配置</p>
            <div id="connStatus" class="status-indicator status-connecting">连接中...</div>
        </header>

        <!-- 导航标签页 -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="status">运行状态</button>
            <button class="tab-btn" data-tab="config">参数配置</button>
            <button class="tab-btn" data-tab="card">卡授权管理</button>
            <button class="tab-btn" data-tab="alarm">告警记录</button>
        </div>

        <!-- 标签页内容区 -->
        <!-- 1. 运行状态页 -->
        <div class="tab-content active" id="status">
            <div class="card">
                <div class="card-header">实时运行参数</div>
                <div class="card-body">
                    <div class="param-grid">
                        <!-- 基础参数 -->
                        <div class="param-card">
                            <div class="param-label">充电状态</div>
                            <div id="chargeStatus" class="param-value text-info">未知状态</div>
                        </div>
                        <div class="param-card">
                            <div class="param-label">充电功率</div>
                            <div id="power" class="param-value">-- W</div>
                        </div>
                        <div class="param-card">
                            <div class="param-label">供电电压</div>
                            <div id="voltage" class="param-value">-- V</div>
                        </div>
                        <div class="param-card">
                            <div class="param-label">充电电流</div>
                            <div id="current" class="param-value">-- A</div>
                        </div>
                        <div class="param-card">
                            <div class="param-label">网络状态</div>
                            <div id="wifiStatus" class="param-value text-danger">未连接(AP)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. 参数配置页 -->
        <div class="tab-content" id="config">
            <div class="card">
                <div class="card-header">设备参数配置</div>
                <div class="card-body">
                    <form id="configForm">
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <label for="voltageDeviation">供电电压偏差</label>
                                    <div class="input-group">
                                        <input type="number" id="voltageDeviation" value="5" min="1" max="10">
                                        <span>%</span>
                                    </div>
                                    <div class="form-text">默认：±5%（AC220V）</div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-group">
                                    <label for="maxCurrent">最大充电电流</label>
                                    <div class="input-group">
                                        <input type="number" id="maxCurrent" value="32" min="10" max="32">
                                        <span>A</span>
                                    </div>
                                    <div class="form-text">默认：≤32A</div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <label for="cpDeviation">CP信号幅值偏差</label>
                                    <div class="input-group">
                                        <input type="number" id="cpDeviation" value="10" min="5" max="15">
                                        <span>%</span>
                                    </div>
                                    <div class="form-text">默认：±10%（12V）</div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-group">
                                    <label for="leakageAC">AC漏电保护阈值</label>
                                    <div class="input-group">
                                        <input type="number" id="leakageAC" value="30" min="10" max="50">
                                        <span>mA</span>
                                    </div>
                                    <div class="form-text">默认：&lt;30mA</div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="leakageDC">DC漏电保护阈值</label>
                            <div class="input-group">
                                <input type="number" id="leakageDC" value="6" min="3" max="10">
                                <span>mA</span>
                            </div>
                            <div class="form-text">默认：&lt;6mA</div>
                        </div>

                        <div>
                            <button type="submit" class="btn btn-primary" id="saveConfigBtn">保存配置</button>
                            <button type="button" class="btn btn-secondary" id="resetConfigBtn">恢复默认</button>
                            <div id="configMsg" class="mt-2 text-success d-none">配置保存成功！</div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- 3. 卡授权管理页 -->
        <div class="tab-content" id="card">
            <div class="card">
                <div class="card-header">添加授权卡</div>
                <div class="card-body">
                    <form id="cardAddForm">
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <label for="cardId">卡号（8位数字）</label>
                                    <input type="text" id="cardId" placeholder="例如：12345678" maxlength="8">
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-group">
                                    <label for="cardExpire">有效期</label>
                                    <input type="date" id="cardExpire">
                                </div>
                            </div>
                            <div class="col" style="min-width: auto;">
                                <div class="form-group" style="margin-top: 24px;">
                                    <button type="submit" class="btn btn-primary">添加</button>
                                </div>
                            </div>
                        </div>
                        <div id="cardAddMsg" class="mt-2 d-none"></div>
                    </form>
                </div>
            </div>

            <div class="card">
                <div class="card-header">已授权卡列表</div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>卡号</th>
                                    <th>有效期</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="cardList">
                                <tr>
                                    <td colspan="4" class="text-center">暂无授权卡数据</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. 告警记录页 -->
        <div class="tab-content" id="alarm">
            <div class="card">
                <div class="card-header card-header-actions">
                    <span>告警记录</span>
                    <button type="button" class="btn btn-secondary" id="clearAlarmBtn">清空记录</button>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>告警时间</th>
                                    <th>故障类型</th>
                                    <th>处理状态</th>
                                </tr>
                            </thead>
                            <tbody id="alarmList">
                                <tr>
                                    <td colspan="4" class="text-center">暂无告警记录</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 底部信息 -->
    <footer>
        <p>设备型号：TOSPO-EVSE-MODE3</p>
    </footer>

    <script src="js/script.js"></script>
</body>
</html>